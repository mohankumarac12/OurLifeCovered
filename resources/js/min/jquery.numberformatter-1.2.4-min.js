!function(e){function r(e,r,t){this.dec=e,this.group=r,this.neg=t}function t(){for(var e=0;e<s.length;e++)for(var r=s[e],t=0;t<r.length;t++)a.put(r[t],e)}function n(e,n){0==a.size()&&t();var i=".",o=",",l="-";0==n&&(-1!=e.indexOf("_")?e=e.split("_")[1].toLowerCase():-1!=e.indexOf("-")&&(e=e.split("-")[1].toLowerCase()));var u=a.get(e);if(u){var s=f[u];s&&(i=s[0],o=s[1])}return new r(i,o,l)}var a=new Hashtable,i=["ae","au","ca","cn","eg","gb","hk","il","in","jp","sk","th","tw","us"],o=["at","br","de","dk","es","gr","it","nl","pt","tr","vn"],l=["bg","cz","fi","fr","no","pl","ru","se"],u=["ch"],f=[[".",","],[",","."],[","," "],[".","'"]],s=[i,o,l,u];e.fn.formatNumber=function(r,t,n){return this.each(function(){null==t&&(t=!0),null==n&&(n=!0);var a;a=e(this).is(":input")?new String(e(this).val()):new String(e(this).text());var i=e.formatNumber(a,r);return t&&(e(this).is(":input")?e(this).val(i):e(this).text(i)),n?i:void 0})},e.formatNumber=function(r,t){for(var t=e.extend({},e.fn.formatNumber.defaults,t),a=n(t.locale.toLowerCase(),t.isFullLocale),i=a.dec,o=a.group,l=a.neg,u="0#-,.",f="",s=!1,c=0;c<t.format.length;c++){if(-1!=u.indexOf(t.format.charAt(c))){if(0==c&&"-"==t.format.charAt(c)){s=!0;continue}break}f+=t.format.charAt(c)}for(var g="",c=t.format.length-1;c>=0&&-1==u.indexOf(t.format.charAt(c));c--)g=t.format.charAt(c)+g;t.format=t.format.substring(f.length),t.format=t.format.substring(0,t.format.length-g.length);var h=new Number(r);return e._formatNumber(h,t,g,f,s)},e._formatNumber=function(r,t,a,i,o){var t=e.extend({},e.fn.formatNumber.defaults,t),l=n(t.locale.toLowerCase(),t.isFullLocale),u=l.dec,f=l.group,s=l.neg;null!=t.overrideGroupSep&&(f=t.overrideGroupSep),null!=t.overrideDecSep&&(u=t.overrideDecSep),null!=t.overrideNegSign&&(s=t.overrideNegSign);var c=!1;if(isNaN(r)){if(1!=t.nanForceZero)return"";r=0,c=!0}(1==t.isPercentage||t.autoDetectPercentage&&"%"==a.charAt(a.length-1))&&(r=100*r);var g="";if(t.format.indexOf(".")>-1){var h=u,d=t.format.substring(t.format.lastIndexOf(".")+1);if(1==t.round)r=new Number(r.toFixed(d.length));else{var m=r.toString();m.lastIndexOf(".")>0&&(m=m.substring(0,m.lastIndexOf(".")+d.length+1)),r=new Number(m)}var v=new Number(r.toString().substring(r.toString().indexOf(".")));decimalString=new String(v.toFixed(d.length)),decimalString=decimalString.substring(decimalString.lastIndexOf(".")+1);for(var p=0;p<d.length;p++)if("#"!=d.charAt(p)||"0"==decimalString.charAt(p)){if("#"==d.charAt(p)&&"0"==decimalString.charAt(p)){var S=decimalString.substring(p);if(S.match("[1-9]")){h+=decimalString.charAt(p);continue}break}"0"==d.charAt(p)&&(h+=decimalString.charAt(p))}else h+=decimalString.charAt(p);g+=h}else r=Math.round(r);var b=Math.floor(r);0>r&&(b=Math.ceil(r));var x="";x=-1==t.format.indexOf(".")?t.format:t.format.substring(0,t.format.indexOf("."));var N="";if(0!=b||"#"!=x.substr(x.length-1)||c){var w=new String(Math.abs(b)),A=9999;-1!=x.lastIndexOf(",")&&(A=x.length-x.lastIndexOf(",")-1);for(var O=0,p=w.length-1;p>-1;p--)N=w.charAt(p)+N,O++,O==A&&0!=p&&(N=f+N,O=0);if(x.length>N.length){var F=x.indexOf("0");if(-1!=F)for(var D=x.length-F,L=x.length-N.length-1;N.length<D;){var P=x.charAt(L);","==P&&(P=f),N=P+N,L--}}}return N||-1===x.indexOf("0",x.length-1)||(N="0"),g=N+g,0>r&&o&&i.length>0?i=s+i:0>r&&(g=s+g),t.decimalSeparatorAlwaysShown||g.lastIndexOf(u)==g.length-1&&(g=g.substring(0,g.length-1)),g=i+g+a},e.fn.parseNumber=function(r,t,n){null==t&&(t=!0),null==n&&(n=!0);var a;a=e(this).is(":input")?new String(e(this).val()):new String(e(this).text());var i=e.parseNumber(a,r);return i&&(t&&(e(this).is(":input")?e(this).val(i.toString()):e(this).text(i.toString())),n)?i:void 0},e.parseNumber=function(r,t){var t=e.extend({},e.fn.parseNumber.defaults,t),a=n(t.locale.toLowerCase(),t.isFullLocale),i=a.dec,o=a.group,l=a.neg;null!=t.overrideGroupSep&&(o=t.overrideGroupSep),null!=t.overrideDecSep&&(i=t.overrideDecSep),null!=t.overrideNegSign&&(l=t.overrideNegSign);for(var u="1234567890",f=".-",s=t.strict;r.indexOf(o)>-1;)r=r.replace(o,"");r=r.replace(i,".").replace(l,"-");var c="",g=!1;(1==t.isPercentage||t.autoDetectPercentage&&"%"==r.charAt(r.length-1))&&(g=!0);for(var h=0;h<r.length;h++)if(u.indexOf(r.charAt(h))>-1)c+=r.charAt(h);else if(f.indexOf(r.charAt(h))>-1)c+=r.charAt(h),f=f.replace(r.charAt(h),"");else{if(t.allowPostfix)break;if(s){c="NaN";break}}var d=new Number(c);if(g){d/=100;var m=c.indexOf(".");if(-1!=m){var v=c.length-m-1;d=d.toFixed(v+2)}else d=d.toFixed(2)}return d},e.fn.parseNumber.defaults={locale:"us",decimalSeparatorAlwaysShown:!1,isPercentage:!1,autoDetectPercentage:!0,isFullLocale:!1,strict:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,allowPostfix:!1},e.fn.formatNumber.defaults={format:"#,###.00",locale:"us",decimalSeparatorAlwaysShown:!1,nanForceZero:!0,round:!0,isFullLocale:!1,overrideGroupSep:null,overrideDecSep:null,overrideNegSign:null,isPercentage:!1,autoDetectPercentage:!0},Number.prototype.toFixed=function(r){return e._roundNumber(this,r)},e._roundNumber=function(e,r){var t=Math.pow(10,r||0),n=String(Math.round(e*t)/t);if(r>0){var a=n.indexOf(".");for(-1==a?(n+=".",a=0):a=n.length-(a+1);r>a;)n+="0",a++}return n}}(jQuery);